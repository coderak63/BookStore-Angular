<div class="container">
    <hr>
  <div class="d-flex align-items-center"> 
    <span>Ratings and Reviews:</span>   
  </div>
  <div class="row" style="margin-top: 20px;">
      <div class="col-xs-12 col-md-6">
          <div class="well well-sm">
              <div class="row">
                  <div class="col-xs-12 col-md-6 text-center">
                      <h1 class="rating-num">
                          {{this.rating.rating_avg}}</h1>
                      <div class="user-rating">
                        <i id="star_1" class="fa fa-star-o"></i>
                        <i id="star_2" class="fa fa-star-o"></i>
                        <i id="star_3" class="fa fa-star-o"></i>
                        <i id="star_4" class="fa fa-star-o"></i>
                        <i id="star_5" class="fa fa-star-o"></i>

                          
                      </div>
                      <div>
                          <span class="fa fa-user"></span>{{this.rating_total}} total
                      </div>
                  </div>
                  <div class="col-xs-12 col-md-6">
                      <div class="row rating-desc">
                          <div class="col-xs-3 col-md-3 text-right">
                            <i class="fa fa-star fa-sm"></i>5
                          </div>
                          <div class="col-xs-8 col-md-9">
                              <div class="progress progress-striped">
                                  <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="20"
                                      aria-valuemin="0" aria-valuemax="100" style="width: 0%" id="rating_5">
                                      <span class="sr-only">{{this.rating_percent.rating_5 | number : '1.0-0'}}%</span>
                                  </div>
                              </div>
                          </div>
                          <!-- end 5 -->
                          <div class="col-xs-3 col-md-3 text-right">
                            <i class="fa fa-star fa-sm"></i>4
                          </div>
                          <div class="col-xs-8 col-md-9">
                              <div class="progress">
                                  <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="20"
                                      aria-valuemin="0" aria-valuemax="100" style="width: 0%" id="rating_4">
                                      <span class="sr-only">{{this.rating_percent.rating_4 | number : '1.0-0'}}%</span>
                                  </div>
                              </div>
                          </div>
                          <!-- end 4 -->
                          <div class="col-xs-3 col-md-3 text-right">
                            <i class="fa fa-star fa-sm"></i>3
                          </div>
                          <div class="col-xs-8 col-md-9">
                              <div class="progress">
                                  <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20"
                                      aria-valuemin="0" aria-valuemax="100" style="width: 0%" id="rating_3">
                                      <span class="sr-only">{{this.rating_percent.rating_3 | number : '1.0-0'}}%</span>
                                  </div>
                              </div>
                          </div>
                          <!-- end 3 -->
                          <div class="col-xs-3 col-md-3 text-right">
                            <i class="fa fa-star fa-sm"></i>2
                          </div>
                          <div class="col-xs-8 col-md-9">
                              <div class="progress">
                                  <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="20"
                                      aria-valuemin="0" aria-valuemax="100" style="width: 0%" id="rating_2">
                                      <span class="sr-only">{{this.rating_percent.rating_2 | number : '1.0-0'}}%</span>
                                  </div>
                              </div>
                          </div>
                          <!-- end 2 -->
                          <div class="col-xs-3 col-md-3 text-right">
                            <i class="fa fa-star fa-sm"></i>1
                          </div>
                          <div class="col-xs-8 col-md-9">
                              <div class="progress">
                                  <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80"
                                      aria-valuemin="0" aria-valuemax="100" style="width: 0%" id="rating_1">
                                      <span class="sr-only">{{this.rating_percent.rating_1 | number : '1.0-0'}}%</span>
                                  </div>
                              </div>
                          </div>
                          <!-- end 1 -->
                      </div>
                      <!-- end row -->
                  </div>
              </div>
          </div>
      </div>
  </div>

  <hr>
  <div class="d-flex align-items-center"> 
    <span>Your Ratings and Reviews:</span>   
  </div>

    <div class="container" style="margin-top: 10px;">
        
        
        <div *ngIf="this.my_rating_added" class="row">
            <!--
            <label class="h5">My Rating</label>
            <div class="my-rating">
                <i id="my_star_1" class="fa fa-star-o"></i>
                <i id="my_star_2" class="fa fa-star-o"></i>
                <i id="my_star_3" class="fa fa-star-o"></i>
                <i id="my_star_4" class="fa fa-star-o"></i>
                <i id="my_star_5" class="fa fa-star-o"></i>              
            </div>
            -->
    


            <div class="review-list">
                <ul>
                <li>
                <div class="d-flex">
                    <div class="left">
                        <span>
                            <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="profile-pict-img img-fluid" alt="" />
                        </span>
                    </div>
                    <div class="right">
                        <h4>
                            {{this.username}}
                            <span class="gig-rating text-body-2">
                                <i class="fa fa-star"></i>
                                {{this.my_rating.rating}}
                            </span>
                        </h4>
                        <div class="review-title">
                            <span class="h6">
                                {{this.my_rating.title}}
                            </span>
                        </div>
                        <div class="review-description" style="margin-top: 0;">
                            <p>
                                {{this.my_rating.review}}
                            </p>
                        </div>
                    </div>
                </div>
                </li>
                </ul>
            </div>
        </div>


        
        <div class="row">
        <button class="btn btn-primary" style="width: 50%;" (click)="basicModal.show()"><span *ngIf=" !this.my_rating_added; else edit_review">Add a review</span></button>
        <ng-template #edit_review>Edit your Review</ng-template>
        </div>

    </div>

    <hr>

        <div class="d-flex align-items-center"> 
        <span>All Users's Reviews:</span>   
        </div>
    <div class="container">
        <div class="review-list">
            <span *ngIf="this.all_ratings.length==0 || (this.all_ratings.length==1 && this.all_ratings[0].username==this.username)" style="color: rgb(163, 156, 156);">No Other Reviews Available</span>
         <ul *ngFor="let rating of this.all_ratings">
            <li *ngIf="rating.username!=this.username">
            <div class="d-flex">
                <div class="left">
                    <span>
                        <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="profile-pict-img img-fluid" alt="" />
                    </span>
                </div>
                <div class="right">
                    <h4>
                        {{rating.username}}
                        <span class="gig-rating text-body-2">
                            <i class="fa fa-star"></i>
                            {{rating.rating}}
                        </span>
                    </h4>
                    <div class="review-title">
                        <span class="h6">
                            {{rating.title}}
                        </span>
                    </div>
                    <div class="review-description" style="margin-top: 0;">
                        <p>
                            {{rating.review}}
                        </p>
                    </div>
                </div>
            </div>
            </li>
            </ul>
        </div>
    </div>


</div>







  <div mdbModal #basicModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myBasicModalLabel" aria-hidden="true">
    <form #myForm="ngForm" class="form-horizontal" (submit)="sendReviews(basicModal)" ngNativeValidate>
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title w-100" id="myModalLabel">Add Review</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="hideModal(basicModal)">
                <span aria-hidden="true">×</span>
              </button>
          </div>
          <div class="modal-body">

            <!-- Ratings -->
            <div class="md-form mb-4">
                <label class="h5">Your Rating
                    ( <span>
                        {{this.my_rating.rating}} <i class="fa fa-star"></i>
                    </span>)
                </label>
            <div class="rating"> 
                <input type="radio" name="rating" value="5" id="5" [(ngModel)]="this.my_rating.rating">
                <label for="5" id="modal_rating_5">☆</label> 
                <input type="radio" name="rating" value="4" id="4" [(ngModel)]="this.my_rating.rating">
                <label for="4" id="modal_rating_4">☆</label> 
                <input type="radio" name="rating" value="3" id="3" [(ngModel)]="this.my_rating.rating">
                <label for="3" id="modal_rating_3">☆</label> 
                <input type="radio" name="rating" value="2" id="2" [(ngModel)]="this.my_rating.rating">
                <label for="2" id="modal_rating_2">☆</label> 
                <input type="radio" name="rating" value="1" id="1" [(ngModel)]="this.my_rating.rating">
                <label for="1" id="modal_rating_1">☆</label>
            </div>
            </div>
    
            <!-- Title -->
            <div class="md-form mb-4">
                <label class="h5" for="modal-title">Title (Optional)</label>
                <input type="text" id="modal-title" name="review_title" class="form-control" mdbInput [(ngModel)]="this.my_rating.title">
            </div>
    
            <!-- Description -->
            <div class="md-form mb-4">
                <label class="h5" for="modal-input" id="modal-input-label">Review (Optional)</label>
                <textarea id="modal-description" name="review_description" class="form-control" mdbInput [(ngModel)]="this.my_rating.review"></textarea>
            </div>
    
          </div>
          <div class="modal-footer">
            <button type="button" mdbBtn color="secondary" class="waves-light" aria-label="Close" (click)="hideModal(basicModal)" mdbWavesEffect>Close</button>
            <input type="submit" mdbBtn color="primary" class="relative waves-light" mdbWavesEffect value="Save changes">
          </div>
        </div>
      </div>
    </form>
    </div>




